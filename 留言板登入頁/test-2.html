<!doctype html>
<html lang="">

<head>
  <title>register</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS v5.0.2 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

</head>

<body>
  <div class="container">
    <button class="but" id="submit_btn">GET</button>

    <input type="text" required="required" placeholder="使用者名稱" name="username" id="username"></input>
    <input type="password" required="required" placeholder="密碼" name="password" id="password"></input>
    <button class="but" id="submit_btn2">POST</button>
    <button class="but" id="submit_btn3">Create</button>
  </div>
  <!-- Bootstrap JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js"
    integrity="sha512-YUkaLm+KJ5lQXDBdqBqk7EVhJAdxRnVdT2vtCzwPHSweCzyMgYV/tgGF4/dCyqtCC2eCphz0lRQgatGVdfR0ww=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>


  <!-- axios -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script>

    //messageboard
    $("#submit_btn").click(function () {
      console.log("get Click!");
      // axios.get('http://localhost:3000/messageboard')
      //   .then((response) => {
      //     console.log(response.data)
      //     // if (response.data === 'hello world') {
      //     //   console.log('Finally!!');
      //     // }
      //     // else {
      //     //   console.log('Nooooo');
      //     // }
      //   })
      //   .catch((error) => console.log(error))

      fetch("http://localhost:3000/messageboard"
        , {
          method: 'GET',
          headers: {
            "Content-Type": "application/json",
          }
        }
      )
        .then(async response => {
          console.log("then");
          const resJson = await response.json();
          console.log("response:", resJson);
          // if (response === 'hello world') {
          //   console.log("success")
          //   //  windows.location.href = "./messboard-login.html"
          // }
          // else {
          //   console.log("error")
          // }
        })
    })

    //login
    $("#submit_btn2").click(function () {

      var usernameinput = $("#username").val();
      var passwordinput = $("#password").val();
      console.log(usernameinput);
      console.log(passwordinput);
      console.log("get Click!");


      /* axios.post('http://localhost:3000/login', {
        username: usernameinput,
        password: passwordinput
      }) */
      fetch("http://localhost:3000/messageboard/login"
        , {
          method: 'GET',
          headers: {
            "Content-Type": "application/json"
          },
          body: ("username: usernameinput",
            "password: passwordinput")

        }
      )



        .then((response) => {
          console.log(response.data)
          if (response.data === 'success') {
            console.log('Finally!!');
          }
          else {
            console.log('Nooooo');
          }
        })
        .catch((error) => console.log(error))
    })

    //create
    $("#submit_btn3").click(function () {

      var usernameinput = $("#username").val();
      var passwordinput = $("#password").val();
      console.log(usernameinput);
      console.log(passwordinput);
      console.log("get Click!");

      /* axios.post('http://localhost:3000/create_accounts', {
        username: usernameinput,
        password: passwordinput
      }) */

      fetch("http://localhost:3000/messageboard/create_accounts"
        , {
          method: 'GET',
          headers: {
            "Content-Type": "application/json"
          },
          body: ("username: usernameinput",
            "password: passwordinput")

        }
      )
        .then((response) => {
          console.log(response.data)
          if (response.data === 'Create Account!') {
            console.log('Create');
            location.href = "./messboard_login.html";
          }
          else {
            console.log('Nooooo');
          }
        })
        .catch((error) => console.log(error))
    })
  </script>

</body>

</html>